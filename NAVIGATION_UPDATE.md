# ุชุญุฏูุซ ูุธุงู ุงูุชููู - Navigation Update

## ุงูุชุบููุฑุงุช ุงููุทุจูุฉ

### 1. ุฅุตูุงุญ ูุดููุฉ ุธููุฑ "ููุญุฉ ุงูุชุญูู" ููุทูุงุจ

ุชู ุฅุตูุงุญ ุงููุดููุฉ ุงูุชู ูุงูุช ุชุณุจุจ ุธููุฑ ุชุจููุจ "ููุญุฉ ุงูุชุญูู" (teacher) ูู ุดุฑูุท ุงูุชููู ุงูุณููู ูุฌููุน ุงููุณุชุฎุฏููู ุจูุง ูููู ุงูุทูุงุจ.

### 2. ุฅุถุงูุฉ ุชุจููุจ "ุฏุฑูุณู" ููุทูุงุจ

ุชู ุฅุถุงูุฉ ุชุจููุจ ุฌุฏูุฏ ุงุณูู "ุฏุฑูุณู" ูุธูุฑ **ููุท ููุทูุงุจ** ููุญุชูู ุนูู:
- ุงูุฏุฑูุณ ุงูุชู ุชู ุดุฑุงุคูุง
- ุฅุญุตุงุฆูุงุช ุนู ุนุฏุฏ ุงูุฏุฑูุณ ูุงูููุฏูููุงุช
- ูุงุฌูุฉ ุณููุฉ ูููุตูู ุงูุณุฑูุน ููุฏุฑูุณ ุงููุดุชุฑุงุฉ

## ููู ูุนูู ุงููุธุงู ุงูุขู

### ููุทูุงุจ (Student):
ูุธูุฑ ูู ุดุฑูุท ุงูุชููู ุงูุณููู:
1. ๐ **ุงูุฑุฆูุณูุฉ** - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
2. ๐ **ุงูุฏุฑูุณ** - ุฌููุน ุงูุฏุฑูุณ ุงููุชุงุญุฉ
3. ๐ **ุฏุฑูุณู** - ุงูุฏุฑูุณ ุงููุดุชุฑุงุฉ (ุฌุฏูุฏ!)
4. ๐ค **ุงูุญุณุงุจ** - ุงูููู ุงูุดุฎุตู

### ูููุฏุฑุณูู (Teacher):
ูุธูุฑ ูู ุดุฑูุท ุงูุชููู ุงูุณููู:
1. ๐ **ุงูุฑุฆูุณูุฉ** - ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
2. ๐ **ุงูุฏุฑูุณ** - ุฌููุน ุงูุฏุฑูุณ
3. โ๏ธ **ููุญุฉ ุงูุชุญูู** - ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ ูุงููุญุชูู
4. ๐ค **ุงูุญุณุงุจ** - ุงูููู ุงูุดุฎุตู

## ุงููููุงุช ุงููุนุฏูุฉ

### 1. `app/(tabs)/_layout.tsx`
```typescript
// ุชู ุงุณุชุฎุฏุงู ุฎุงุตูุฉ href ูุฅุฎูุงุก/ุฅุธูุงุฑ ุงูุชุจููุจุงุช ุญุณุจ ููุน ุงููุณุชุฎุฏู
<Tabs.Screen
  name="my-lessons"
  options={{
    title: 'ุฏุฑูุณู',
    tabBarIcon: ({ color, size }) => <GraduationCap size={size} color={color} />,
    href: isTeacher ? null : undefined, // ูุธูุฑ ููุท ููุทูุงุจ
  }}
/>
<Tabs.Screen
  name="teacher"
  options={{
    title: 'ููุญุฉ ุงูุชุญูู',
    tabBarIcon: ({ color, size }) => <Settings size={size} color={color} />,
    href: isTeacher ? undefined : null, // ูุธูุฑ ููุท ูููุฏุฑุณูู
  }}
/>
```

### 2. `app/(tabs)/my-lessons.tsx` (ุฌุฏูุฏ)
ุตูุญุฉ "ุฏุฑูุณู" ููุทูุงุจ ุชุญุชูู ุนูู:
- ุนุฑุถ ุงูุฏุฑูุณ ุงููุดุชุฑุงุฉ
- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ
- ุฑุณุงูุฉ ุชูุถูุญูุฉ ุฅุฐุง ูู ููู ููุงู ุฏุฑูุณ ูุดุชุฑุงุฉ
- ุญูุงูุฉ ููุตูุญุฉ (ุชุธูุฑ ููุท ููุทูุงุจ)

## ููุงุญุธุงุช ูููุฉ

### ูุธุงู ุงูุดุฑุงุก (ููุชุทููุฑ ุงููุณุชูุจูู)
ุญุงููุงูุ ุตูุญุฉ "ุฏุฑูุณู" ุชุนุฑุถ ุฌููุน ุงูุฏุฑูุณ ุงูููุดูุฑุฉ ููุซุงู. ูุชุทุจูู ูุธุงู ุงูุดุฑุงุก ุงููุนูู:

1. ุฅูุดุงุก ุฌุฏูู `purchased_lessons` ูู Supabase:
```sql
CREATE TABLE purchased_lessons (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id uuid REFERENCES profiles(id) ON DELETE CASCADE,
  lesson_id uuid REFERENCES lessons(id) ON DELETE CASCADE,
  purchased_at timestamptz DEFAULT now(),
  UNIQUE(user_id, lesson_id)
);

ALTER TABLE purchased_lessons ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own purchases"
  ON purchased_lessons FOR SELECT
  TO authenticated
  USING (user_id = auth.uid());
```

2. ุชุญุฏูุซ ุงูุงุณุชุนูุงู ูู `my-lessons.tsx`:
```typescript
// ุฌูุจ ุงูุฏุฑูุณ ุงููุดุชุฑุงุฉ ููุท
const { data: purchasedData } = await supabase
  .from('purchased_lessons')
  .select('lesson_id')
  .eq('user_id', user?.id);

const lessonIds = purchasedData?.map(p => p.lesson_id) || [];

const { data: lessonsData } = await supabase
  .from('lessons')
  .select('*')
  .in('id', lessonIds);
```

3. ุฅุถุงูุฉ ุฒุฑ "ุดุฑุงุก" ูู ุตูุญุฉ ุชูุงุตูู ุงูุฏุฑุณ
4. ุฏูุฌ ุจูุงุจุฉ ุงูุฏูุน (Stripe ุฃู ุบูุฑูุง)

## ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุญุณุงุจ ุทุงูุจ:
1. ุณุฌู ุฏุฎูู ูุทุงูุจ
2. ุชุญูู ูู ุฃู ุดุฑูุท ุงูุชููู ูุญุชูู ุนูู:
   - ุงูุฑุฆูุณูุฉ โ
   - ุงูุฏุฑูุณ โ
   - ุฏุฑูุณู โ
   - ุงูุญุณุงุจ โ
3. ุชุญูู ูู **ุนุฏู** ูุฌูุฏ "ููุญุฉ ุงูุชุญูู"

### ุงุฎุชุจุงุฑ ุญุณุงุจ ูุฏุฑุณ:
1. ุณุฌู ุฏุฎูู ููุฏุฑุณ
2. ุชุญูู ูู ุฃู ุดุฑูุท ุงูุชููู ูุญุชูู ุนูู:
   - ุงูุฑุฆูุณูุฉ โ
   - ุงูุฏุฑูุณ โ
   - ููุญุฉ ุงูุชุญูู โ
   - ุงูุญุณุงุจ โ
3. ุชุญูู ูู **ุนุฏู** ูุฌูุฏ "ุฏุฑูุณู"

## ุฎุทูุงุช ุงูุชุทููุฑ ุงูุชุงููุฉ

1. **ูุธุงู ุงูุดุฑุงุก**
   - ุฅุถุงูุฉ ุฌุฏูู purchased_lessons
   - ุฅุถุงูุฉ ุฒุฑ ุดุฑุงุก ูู ุตูุญุฉ ุงูุฏุฑุณ
   - ุฏูุฌ ุจูุงุจุฉ ุฏูุน

2. **ุชุชุจุน ุงูุชูุฏู**
   - ุญุณุงุจ ูุณุจุฉ ุฅููุงู ูู ุฏุฑุณ
   - ุนุฑุถ ุขุฎุฑ ููุฏูู ุชูุช ูุดุงูุฏุชู
   - ุฅุถุงูุฉ ุดุฑูุท ุชูุฏู ููู ุฏุฑุณ

3. **ุงูุฅุดุนุงุฑุงุช**
   - ุฅุดุนุงุฑ ุนูุฏ ุฅุถุงูุฉ ููุฏูู ุฌุฏูุฏ ูุฏุฑุณ ูุดุชุฑู
   - ุฅุดุนุงุฑ ุนูุฏ ุฅุถุงูุฉ ุฏุฑุณ ุฌุฏูุฏ

4. **ุงูููุถูุฉ**
   - ุฅุถุงูุฉ ุงูุฏุฑูุณ ููููุถูุฉ
   - ุนุฑุถ ุณุฑูุน ููุฏุฑูุณ ุงูููุถูุฉ

---

ุชู ุชุทุจูู ุงูุชุญุฏูุซุงุช ุจูุฌุงุญ! โ
